import{_ as x,G as _,o as l,c as i,z as n,I as v,a as e,A as b,F as a,g as u,t as r,J as m,K as C,L as V,m as T,d as k,r as y}from"./index-Bavkz2tH.js";import{b as w}from"./bootstrap.min-BX-e7Dm5.js";import{c as P}from"./checkLogin-zC808EN4.js";const f="https://vue3-course-api.hexschool.io/v2",g="hogwarts",D={props:["getProduct"],data(){return{professor:["Severus Snape","Filius Flitwick","Minerva McGonagall","Remus Lupin","Sybill Trelawney","Cuthbert Binns","Pomona Sprout","Rolanda Hooch","Rubeus Hagrid","Dolores Umbridge","Albus Dumbledore"],price:[5e3,1e4,15e3,2e4],courseModal:null,time:["Mon:0900~1200","Mon:0200~0500","Tues:0900~1200","Tues:0200~0500","Wed:0900~1200","Wed:0200~0500","Thur:0900~1200","Thur:0200~0500","Fri:0900~1200","Fri:0200~0500"],classRoom:["大禮堂","咒語學教室","變形術教室","魔法藥水學教室","防禦術教室","飛行課操場","魔法植物學溫室","預測學教室","Forbidden Forest"],edit:{category:"course",title:"",content:"",description:"",imageUrl:"",time:"",classroom:"",price:"",is_enabled:0},addCourse:{title:"",category:"course",unit:"門",origin_price:0,is_enabled:0}}},methods:{showModal(d){this.edit=d,this.courseModal.show(),console.log(this.edit)},close(){this.edit={},console.log(this.edit)},save(){console.log(this.edit);const d=this.edit;d.price=Number(d.price);const o=this.edit.id;console.log(o),_.put(`${f}/api/${g}/admin/product/${o}`,{data:d}).then(h=>{console.log(h),alert("Mischief managed"),this.courseModal.hide(),this.getProduct()}).catch(h=>{console.log(h)})},add(){console.log(this.addCourse);const d=this.addCourse;d.price=Number(d.price),_.post(`${f}/api/${g}/admin/product`,{data:d}).then(o=>{console.log(o),alert("Mischief managed"),this.courseModal.hide(),this.getProduct()}).catch(o=>{alert(o.response.data.message)})},deleteItem(){console.log(this.edit.id);const d=this.edit.id;_.delete(`${f}/api/${g}/admin/product/${d}`).then(o=>{console.log(o),alert("Mischief managed"),this.courseModal.hide(),this.getProduct()}).catch(o=>{alert(o.response.data.message)})}},mounted(){this.courseModal=new w.Modal(this.$refs.courseModal,{keyboard:!1,backdrop:"static"})}},L={class:"modal modal-lg",tabindex:"-1",ref:"courseModal"},S={class:"modal-dialog"},I={class:"modal-content"},A={class:"modal-header"},F=e("h5",{class:"modal-title"},"編輯課程",-1),R={class:"modal-body"},E={class:"mb-3"},N=e("label",{for:"courseTitle",class:"form-label"},"課程名稱",-1),B={class:"mb-3"},H=e("label",{for:"professor"},"教授",-1),j=e("option",{selected:"",disabled:""},"請選擇教授",-1),G={class:"mb-3"},z=e("label",{for:"courseDescription",class:"form-label"},"課程敘述",-1),O={class:"mb-3"},W=e("label",{for:"courseTime",class:"form-label"},"上課時段",-1),J=e("option",{selected:"",disabled:""},"請選擇上課時段",-1),K={class:"mb-3"},q=e("label",{for:"classroom",class:"form-label"},"教室",-1),Q=e("option",{selected:"",disabled:""},"請選擇上課教室",-1),X={class:"mb-3"},Y=e("label",{for:"coursePrice",class:"form-label"},"課程售價",-1),Z=e("option",{selected:"",disabled:""},"請選擇本課程售價",-1),$={class:"form-check"},ee=["checked"],se=e("label",{class:"form-check-label",for:"flexCheckChecked"}," 開放選課 ",-1),oe={class:"mb-3"},te=e("label",{for:"photo",class:"form-label"},"照片",-1),le=["src"],ie={class:"modal-footer d-flex justify-content-between"},de={class:"modal-dialog"},ce={class:"modal-content"},ne={class:"modal-header"},re=e("h5",{class:"modal-title"},"新增課程",-1),ae={class:"modal-body"},ue={class:"mb-3"},me=e("label",{for:"courseTitle",class:"form-label"},"課程名稱",-1),pe={class:"mb-3"},be=e("label",{for:"professor"},"教授",-1),he=e("option",{selected:"",disabled:""},"請選擇教授",-1),_e={class:"mb-3"},fe=e("label",{for:"courseDescription",class:"form-label"},"課程敘述",-1),ge={class:"mb-3"},ve=e("label",{for:"courseTime",class:"form-label"},"上課時段",-1),Ce=e("option",{selected:"",disabled:""},"請選擇上課時段",-1),ke={class:"mb-3"},ye=e("label",{for:"classroom",class:"form-label"},"教室",-1),xe=e("option",{selected:"",disabled:""},"請選擇上課教室",-1),Me={class:"mb-3"},Ue=e("label",{for:"coursePrice",class:"form-label"},"課程售價",-1),Ve=e("option",{selected:"",disabled:""},"請選擇本課程售價",-1),Te={class:"form-check"},we=["checked"],Pe=e("label",{class:"form-check-label",for:"flexCheckChecked"}," 開放選課 ",-1),De={class:"mb-3"},Le=e("label",{for:"photo",class:"form-label"},"照片",-1),Se=["src"],Ie={class:"modal-footer"};function Ae(d,o,h,M,t,c){return l(),i("div",L,[n(e("div",S,[e("div",I,[e("div",A,[F,e("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close",onClick:o[0]||(o[0]=(...s)=>c.close&&c.close(...s))})]),e("div",R,[e("div",E,[N,n(e("input",{type:"text",class:"form-control",id:"courseTitle",placeholder:"請輸入課程名稱","onUpdate:modelValue":o[1]||(o[1]=s=>t.edit.title=s)},null,512),[[b,t.edit.title]])]),e("div",B,[H,n(e("select",{class:"form-select","aria-label":"Default select example",id:"professor","onUpdate:modelValue":o[2]||(o[2]=s=>t.edit.content=s)},[j,(l(!0),i(a,null,u(t.professor,s=>(l(),i("option",{key:s},r(s),1))),128))],512),[[m,t.edit.content]])]),e("div",G,[z,n(e("textarea",{class:"form-control",id:"courseDescription",rows:"3","onUpdate:modelValue":o[3]||(o[3]=s=>t.edit.description=s)},null,512),[[b,t.edit.description]])]),e("div",O,[W,n(e("select",{class:"form-select","aria-label":"Default select example",id:"courseTime","onUpdate:modelValue":o[4]||(o[4]=s=>t.edit.time=s)},[J,(l(!0),i(a,null,u(t.time,s=>(l(),i("option",{key:s},r(s),1))),128))],512),[[m,t.edit.time]])]),e("div",K,[q,n(e("select",{class:"form-select","aria-label":"Default select example",id:"classroom","onUpdate:modelValue":o[5]||(o[5]=s=>t.edit.classroom=s)},[Q,(l(!0),i(a,null,u(t.classRoom,s=>(l(),i("option",{key:s},r(s),1))),128))],512),[[m,t.edit.classroom]])]),e("div",X,[Y,n(e("select",{class:"form-select","aria-label":"Default select example",id:"coursePrice","onUpdate:modelValue":o[6]||(o[6]=s=>t.edit.price=s)},[Z,(l(!0),i(a,null,u(t.price,s=>(l(),i("option",{key:s},r(s),1))),128))],512),[[m,t.edit.price]])]),e("div",$,[n(e("input",{class:"form-check-input",type:"checkbox",value:"",id:"flexCheckChecked",checked:t.edit.is_enabled,"onUpdate:modelValue":o[7]||(o[7]=s=>t.edit.is_enabled=s)},null,8,ee),[[C,t.edit.is_enabled]]),se]),e("div",oe,[te,n(e("input",{type:"text",class:"form-control",id:"photo",placeholder:"請提供相關照片","onUpdate:modelValue":o[8]||(o[8]=s=>t.edit.imageUrl=s)},null,512),[[b,t.edit.imageUrl]]),e("img",{src:t.edit.imageUrl,class:"mt-3",style:{height:"200px",weight:"200px"}},null,8,le)])]),e("div",ie,[e("button",{onClick:o[9]||(o[9]=(...s)=>c.deleteItem&&c.deleteItem(...s)),type:"button",class:"btn btn-danger"},"Delete"),e("div",null,[e("button",{type:"button",class:"btn btn-secondary me-2","data-bs-dismiss":"modal",onClick:o[10]||(o[10]=(...s)=>c.close&&c.close(...s))},"Close"),t.edit.id?(l(),i("button",{key:0,type:"button",class:"btn btn-primary",onClick:o[11]||(o[11]=(...s)=>c.save&&c.save(...s))},"Save Changes")):V("",!0)])])])],512),[[v,t.edit.id]]),n(e("div",de,[e("div",ce,[e("div",ne,[re,e("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close",onClick:o[12]||(o[12]=(...s)=>c.close&&c.close(...s))})]),e("div",ae,[e("div",ue,[me,n(e("input",{type:"text",class:"form-control",id:"courseTitle",placeholder:"請輸入課程名稱","onUpdate:modelValue":o[13]||(o[13]=s=>t.addCourse.title=s)},null,512),[[b,t.addCourse.title]])]),e("div",pe,[be,n(e("select",{class:"form-select","aria-label":"Default select example",id:"professor","onUpdate:modelValue":o[14]||(o[14]=s=>t.addCourse.content=s)},[he,(l(!0),i(a,null,u(t.professor,s=>(l(),i("option",{key:s},r(s),1))),128))],512),[[m,t.addCourse.content]])]),e("div",_e,[fe,n(e("textarea",{class:"form-control",id:"courseDescription",rows:"3","onUpdate:modelValue":o[15]||(o[15]=s=>t.addCourse.description=s)},null,512),[[b,t.addCourse.description]])]),e("div",ge,[ve,n(e("select",{class:"form-select","aria-label":"Default select example",id:"courseTime","onUpdate:modelValue":o[16]||(o[16]=s=>t.addCourse.time=s)},[Ce,(l(!0),i(a,null,u(t.time,s=>(l(),i("option",{key:s},r(s),1))),128))],512),[[m,t.addCourse.time]])]),e("div",ke,[ye,n(e("select",{class:"form-select","aria-label":"Default select example",id:"classroom","onUpdate:modelValue":o[17]||(o[17]=s=>t.addCourse.classroom=s)},[xe,(l(!0),i(a,null,u(t.classRoom,s=>(l(),i("option",{key:s},r(s),1))),128))],512),[[m,t.addCourse.classroom]])]),e("div",Me,[Ue,n(e("select",{class:"form-select","aria-label":"Default select example",id:"coursePrice","onUpdate:modelValue":o[18]||(o[18]=s=>t.addCourse.price=s)},[Ve,(l(!0),i(a,null,u(t.price,s=>(l(),i("option",{key:s},r(s),1))),128))],512),[[m,t.addCourse.price]])]),e("div",Te,[n(e("input",{class:"form-check-input",type:"checkbox",value:"",id:"flexCheckChecked",checked:t.addCourse.is_enabled,"onUpdate:modelValue":o[19]||(o[19]=s=>t.addCourse.is_enabled=s)},null,8,we),[[C,t.addCourse.is_enabled]]),Pe]),e("div",De,[Le,n(e("input",{type:"text",class:"form-control",id:"photo",placeholder:"請提供相關照片","onUpdate:modelValue":o[20]||(o[20]=s=>t.edit.imageUrl=s)},null,512),[[b,t.edit.imageUrl]]),e("img",{src:t.addCourse.imageUrl,class:"w-100 mt-3"},null,8,Se)])]),e("div",Ie,[e("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal",onClick:o[21]||(o[21]=(...s)=>c.close&&c.close(...s))},"Close"),e("button",{type:"button",class:"btn btn-primary",onClick:o[22]||(o[22]=(...s)=>c.add&&c.add(...s))},"Add Course")])])],512),[[v,t.edit.id==null]])],512)}const Fe=x(D,[["render",Ae]]),Re="https://vue3-course-api.hexschool.io/v2",Ee="hogwarts",Ne={components:{CourseModal:Fe},data(){return{productList:[],isLoading:!0}},computed:{...T(P,["isLogin"])},methods:{getProduct(){_.get(`${Re}/api/${Ee}/admin/products/all`).then(d=>{console.log(d),this.productList=d.data.products,this.isLoading=!1})},openModal(d){let o={...d};this.$refs.courseModal.showModal(o)}},mounted(){this.isLogin==!1?this.$router.push({name:"login"}):this.getProduct()}},Be={class:"container py-4 vh-100"},He=e("h1",null,"本學期課程清單",-1),je={class:"d-flex justify-content-end mb-2"},Ge=e("i",{class:"fa-solid fa-plus d-flex justify-content-end",style:{"font-size":"16px"}},null,-1),ze=e("p",{class:"mb-0 ms-1"},"Add new course",-1),Oe=[Ge,ze],We={class:"table table-warning table-bordered border-primary table-hover"},Je=e("thead",null,[e("tr",null,[e("th",{scope:"col",class:"text-center"},"Status"),e("th",{scope:"col",class:"text-center"},"Course"),e("th",{scope:"col",class:"text-center"},"Prof"),e("th",{scope:"col",class:"text-center"},"Galleon"),e("th",{scope:"col",class:"text-center"},"Edit")])],-1),Ke={class:"text-center"},qe={key:0},Qe={key:1},Xe={class:"text-center"},Ye={class:"text-center"},Ze={class:"text-center"},$e={class:"text-center"},es=["onClick"],ss=e("i",{class:"fa-solid fa-key text-warning"},null,-1),os=[ss];function ts(d,o,h,M,t,c){const s=y("LaodingOverlay"),U=y("CourseModal");return l(),i(a,null,[k(s,{active:t.isLoading},null,8,["active"]),e("div",Be,[He,e("div",je,[e("button",{type:"button",class:"btn btn-outline-primary d-flex align-items-center mb-3",onClick:o[0]||(o[0]=p=>c.openModal(null))},Oe)]),e("table",We,[Je,e("tbody",null,[(l(!0),i(a,null,u(t.productList,p=>(l(),i("tr",{key:p.id},[e("td",Ke,[p.is_enabled==!0?(l(),i("p",qe,"已開放")):(l(),i("p",Qe,"未開放"))]),e("td",Xe,r(p.title),1),e("td",Ye,r(p.content),1),e("td",Ze,r(p.price),1),e("td",$e,[e("button",{title:"Alohomora ",class:"bg-transparent border-0",onClick:ls=>c.openModal(p)},os,8,es)])]))),128))])]),k(U,{ref:"courseModal",getProduct:c.getProduct},null,8,["getProduct"])])],64)}const ns=x(Ne,[["render",ts]]);export{ns as default};
