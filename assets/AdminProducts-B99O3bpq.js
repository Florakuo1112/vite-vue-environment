import{_ as k,D as h,o as l,c as i,x as n,H as x,a as e,y as b,F as a,u,t as r,I as m,J as y,K as I,m as T,d as f,r as g}from"./index-BvTcxZWB.js";import{b as w}from"./bootstrap.min-Bxag7N4e.js";import{p as D}from"./PaginationView-f3RnhuSh.js";import{c as L}from"./checkLogin-BdxS32oh.js";const v="https://vue3-course-api.hexschool.io/v2",C="hogwarts",S={props:["getItem"],data(){return{professor:["Severus Snape","Filius Flitwick","Minerva McGonagall","Remus Lupin","Sybill Trelawney","Cuthbert Binns","Pomona Sprout","Rolanda Hooch","Rubeus Hagrid","Dolores Umbridge","Albus Dumbledore"],price:[5e3,1e4,15e3,2e4],courseModal:null,time:["Mon:0900~1200","Mon:0200~0500","Tues:0900~1200","Tues:0200~0500","Wed:0900~1200","Wed:0200~0500","Thur:0900~1200","Thur:0200~0500","Fri:0900~1200","Fri:0200~0500"],classRoom:["大禮堂","咒語學教室","變形術教室","魔法藥水學教室","防禦術教室","飛行課操場","魔法植物學溫室","預測學教室","Forbidden Forest"],edit:{category:"course",title:"",content:"",description:"",imageUrl:"",time:"",classroom:"",price:"",is_enabled:0},addCourse:{title:"",category:"course",unit:"門",origin_price:0,is_enabled:0}}},methods:{showModal(c){this.edit=c,this.courseModal.show(),console.log(this.edit)},close(){this.edit={},console.log(this.edit)},save(){console.log(this.edit);const c=this.edit;c.price=Number(c.price);const o=this.edit.id;console.log(o),h.put(`${v}/api/${C}/admin/product/${o}`,{data:c}).then(_=>{console.log(_),alert("Mischief managed"),this.courseModal.hide(),this.getItem()}).catch(_=>{console.log(_)})},add(){console.log(this.addCourse);const c=this.addCourse;c.price=Number(c.price),h.post(`${v}/api/${C}/admin/product`,{data:c}).then(o=>{console.log(o),alert("Mischief managed"),this.courseModal.hide(),this.getItem()}).catch(o=>{alert(o.response.data.message)})},deleteItem(){console.log(this.edit.id);const c=this.edit.id;h.delete(`${v}/api/${C}/admin/product/${c}`).then(o=>{console.log(o),alert("Mischief managed"),this.courseModal.hide(),this.getItem()}).catch(o=>{alert(o.response.data.message)})}},mounted(){this.courseModal=new w.Modal(this.$refs.courseModal,{keyboard:!1,backdrop:"static"})}},P={class:"modal modal-lg",tabindex:"-1",ref:"courseModal"},F={class:"modal-dialog"},R={class:"modal-content"},A={class:"modal-header"},E=e("h5",{class:"modal-title"},"編輯課程",-1),H={class:"modal-body"},N={class:"mb-3"},j=e("label",{for:"courseTitle",class:"form-label"},"課程名稱",-1),B={class:"mb-3"},G=e("label",{for:"professor"},"教授",-1),O=e("option",{selected:"",disabled:""},"請選擇教授",-1),W={class:"mb-3"},z=e("label",{for:"courseDescription",class:"form-label"},"課程敘述",-1),J={class:"mb-3"},K=e("label",{for:"courseTime",class:"form-label"},"上課時段",-1),q=e("option",{selected:"",disabled:""},"請選擇上課時段",-1),Q={class:"mb-3"},X=e("label",{for:"classroom",class:"form-label"},"教室",-1),Y=e("option",{selected:"",disabled:""},"請選擇上課教室",-1),Z={class:"mb-3"},$=e("label",{for:"coursePrice",class:"form-label"},"課程售價",-1),ee=e("option",{selected:"",disabled:""},"請選擇本課程售價",-1),se={class:"form-check"},oe=["checked"],te=e("label",{class:"form-check-label",for:"flexCheckChecked"}," 開放選課 ",-1),le={class:"mb-3"},ie=e("label",{for:"photo",class:"form-label"},"照片",-1),de=["src"],ne={class:"modal-footer d-flex justify-content-between"},ce={class:"modal-dialog"},re={class:"modal-content"},ae={class:"modal-header"},ue=e("h5",{class:"modal-title"},"新增課程",-1),me={class:"modal-body"},pe={class:"mb-3"},be=e("label",{for:"courseTitle",class:"form-label"},"課程名稱",-1),_e={class:"mb-3"},he=e("label",{for:"professor"},"教授",-1),fe=e("option",{selected:"",disabled:""},"請選擇教授",-1),ge={class:"mb-3"},ve=e("label",{for:"courseDescription",class:"form-label"},"課程敘述",-1),Ce={class:"mb-3"},xe=e("label",{for:"courseTime",class:"form-label"},"上課時段",-1),ye=e("option",{selected:"",disabled:""},"請選擇上課時段",-1),ke={class:"mb-3"},Me=e("label",{for:"classroom",class:"form-label"},"教室",-1),Ue=e("option",{selected:"",disabled:""},"請選擇上課教室",-1),Ve={class:"mb-3"},Ie=e("label",{for:"coursePrice",class:"form-label"},"課程售價",-1),Te=e("option",{selected:"",disabled:""},"請選擇本課程售價",-1),we={class:"form-check"},De=["checked"],Le=e("label",{class:"form-check-label",for:"flexCheckChecked"}," 開放選課 ",-1),Se={class:"mb-3"},Pe=e("label",{for:"photo",class:"form-label"},"照片",-1),Fe=["src"],Re={class:"modal-footer"};function Ae(c,o,_,M,t,d){return l(),i("div",P,[n(e("div",F,[e("div",R,[e("div",A,[E,e("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close",onClick:o[0]||(o[0]=(...s)=>d.close&&d.close(...s))})]),e("div",H,[e("div",N,[j,n(e("input",{type:"text",class:"form-control",id:"courseTitle",placeholder:"請輸入課程名稱","onUpdate:modelValue":o[1]||(o[1]=s=>t.edit.title=s)},null,512),[[b,t.edit.title]])]),e("div",B,[G,n(e("select",{class:"form-select","aria-label":"Default select example",id:"professor","onUpdate:modelValue":o[2]||(o[2]=s=>t.edit.content=s)},[O,(l(!0),i(a,null,u(t.professor,s=>(l(),i("option",{key:s},r(s),1))),128))],512),[[m,t.edit.content]])]),e("div",W,[z,n(e("textarea",{class:"form-control",id:"courseDescription",rows:"3","onUpdate:modelValue":o[3]||(o[3]=s=>t.edit.description=s)},null,512),[[b,t.edit.description]])]),e("div",J,[K,n(e("select",{class:"form-select","aria-label":"Default select example",id:"courseTime","onUpdate:modelValue":o[4]||(o[4]=s=>t.edit.time=s)},[q,(l(!0),i(a,null,u(t.time,s=>(l(),i("option",{key:s},r(s),1))),128))],512),[[m,t.edit.time]])]),e("div",Q,[X,n(e("select",{class:"form-select","aria-label":"Default select example",id:"classroom","onUpdate:modelValue":o[5]||(o[5]=s=>t.edit.classroom=s)},[Y,(l(!0),i(a,null,u(t.classRoom,s=>(l(),i("option",{key:s},r(s),1))),128))],512),[[m,t.edit.classroom]])]),e("div",Z,[$,n(e("select",{class:"form-select","aria-label":"Default select example",id:"coursePrice","onUpdate:modelValue":o[6]||(o[6]=s=>t.edit.price=s)},[ee,(l(!0),i(a,null,u(t.price,s=>(l(),i("option",{key:s},r(s),1))),128))],512),[[m,t.edit.price]])]),e("div",se,[n(e("input",{class:"form-check-input",type:"checkbox",value:"",id:"flexCheckChecked",checked:t.edit.is_enabled,"onUpdate:modelValue":o[7]||(o[7]=s=>t.edit.is_enabled=s)},null,8,oe),[[y,t.edit.is_enabled]]),te]),e("div",le,[ie,n(e("input",{type:"text",class:"form-control",id:"photo",placeholder:"請提供相關照片","onUpdate:modelValue":o[8]||(o[8]=s=>t.edit.imageUrl=s)},null,512),[[b,t.edit.imageUrl]]),e("img",{src:t.edit.imageUrl,class:"mt-3",style:{height:"200px",weight:"200px"}},null,8,de)])]),e("div",ne,[e("button",{onClick:o[9]||(o[9]=(...s)=>d.deleteItem&&d.deleteItem(...s)),type:"button",class:"btn btn-danger"},"Delete"),e("div",null,[e("button",{type:"button",class:"btn btn-secondary me-2","data-bs-dismiss":"modal",onClick:o[10]||(o[10]=(...s)=>d.close&&d.close(...s))},"Close"),t.edit.id?(l(),i("button",{key:0,type:"button",class:"btn btn-primary",onClick:o[11]||(o[11]=(...s)=>d.save&&d.save(...s))},"Save Changes")):I("",!0)])])])],512),[[x,t.edit.id]]),n(e("div",ce,[e("div",re,[e("div",ae,[ue,e("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close",onClick:o[12]||(o[12]=(...s)=>d.close&&d.close(...s))})]),e("div",me,[e("div",pe,[be,n(e("input",{type:"text",class:"form-control",id:"courseTitle",placeholder:"請輸入課程名稱","onUpdate:modelValue":o[13]||(o[13]=s=>t.addCourse.title=s)},null,512),[[b,t.addCourse.title]])]),e("div",_e,[he,n(e("select",{class:"form-select","aria-label":"Default select example",id:"professor","onUpdate:modelValue":o[14]||(o[14]=s=>t.addCourse.content=s)},[fe,(l(!0),i(a,null,u(t.professor,s=>(l(),i("option",{key:s},r(s),1))),128))],512),[[m,t.addCourse.content]])]),e("div",ge,[ve,n(e("textarea",{class:"form-control",id:"courseDescription",rows:"3","onUpdate:modelValue":o[15]||(o[15]=s=>t.addCourse.description=s)},null,512),[[b,t.addCourse.description]])]),e("div",Ce,[xe,n(e("select",{class:"form-select","aria-label":"Default select example",id:"courseTime","onUpdate:modelValue":o[16]||(o[16]=s=>t.addCourse.time=s)},[ye,(l(!0),i(a,null,u(t.time,s=>(l(),i("option",{key:s},r(s),1))),128))],512),[[m,t.addCourse.time]])]),e("div",ke,[Me,n(e("select",{class:"form-select","aria-label":"Default select example",id:"classroom","onUpdate:modelValue":o[17]||(o[17]=s=>t.addCourse.classroom=s)},[Ue,(l(!0),i(a,null,u(t.classRoom,s=>(l(),i("option",{key:s},r(s),1))),128))],512),[[m,t.addCourse.classroom]])]),e("div",Ve,[Ie,n(e("select",{class:"form-select","aria-label":"Default select example",id:"coursePrice","onUpdate:modelValue":o[18]||(o[18]=s=>t.addCourse.price=s)},[Te,(l(!0),i(a,null,u(t.price,s=>(l(),i("option",{key:s},r(s),1))),128))],512),[[m,t.addCourse.price]])]),e("div",we,[n(e("input",{class:"form-check-input",type:"checkbox",value:"",id:"flexCheckChecked",checked:t.addCourse.is_enabled,"onUpdate:modelValue":o[19]||(o[19]=s=>t.addCourse.is_enabled=s)},null,8,De),[[y,t.addCourse.is_enabled]]),Le]),e("div",Se,[Pe,n(e("input",{type:"text",class:"form-control",id:"photo",placeholder:"請提供相關照片","onUpdate:modelValue":o[20]||(o[20]=s=>t.edit.imageUrl=s)},null,512),[[b,t.edit.imageUrl]]),e("img",{src:t.addCourse.imageUrl,class:"w-100 mt-3"},null,8,Fe)])]),e("div",Re,[e("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal",onClick:o[21]||(o[21]=(...s)=>d.close&&d.close(...s))},"Close"),e("button",{type:"button",class:"btn btn-primary",onClick:o[22]||(o[22]=(...s)=>d.add&&d.add(...s))},"Add Course")])])],512),[[x,t.edit.id==null]])],512)}const Ee=k(S,[["render",Ae]]),He="https://vue3-course-api.hexschool.io/v2",Ne="hogwarts",je={components:{CourseModal:Ee,pagination:D},data(){return{productList:[],isLoading:!0,pages:{}}},computed:{...T(L,["isLogin"])},methods:{getItem(c=1){h.get(`${He}/api/${Ne}/admin/products?page=${c}`).then(o=>{console.log(o),this.productList=o.data.products,this.pages=o.data.pagination,this.isLoading=!1})},openModal(c){let o={...c};this.$refs.courseModal.showModal(o)}},mounted(){this.isLogin==!1?this.$router.push({name:"login"}):this.getItem()}},Be={class:"container pt-4 pb-6"},Ge=e("h1",null,"本學期課程清單",-1),Oe={class:"d-flex justify-content-end mb-2"},We=e("i",{class:"fa-solid fa-plus d-flex justify-content-end",style:{"font-size":"16px"}},null,-1),ze=e("p",{class:"mb-0 ms-1"},"Add new course",-1),Je=[We,ze],Ke={class:"table table-warning table-bordered border-primary table-hover"},qe=e("thead",null,[e("tr",null,[e("th",{scope:"col",class:"text-center"},"Status"),e("th",{scope:"col",class:"text-center"},"Course"),e("th",{scope:"col",class:"text-center"},"Prof"),e("th",{scope:"col",class:"text-center"},"Galleon"),e("th",{scope:"col",class:"text-center"},"Edit")])],-1),Qe={class:"text-center"},Xe={key:0},Ye={key:1},Ze={class:"text-center"},$e={class:"text-center"},es={class:"text-center"},ss={class:"text-center"},os=["onClick"],ts=e("i",{class:"fa-solid fa-pen"},null,-1),ls=[ts],is={class:"d-flex justify-content-center"};function ds(c,o,_,M,t,d){const s=g("LaodingOverlay"),U=g("pagination"),V=g("CourseModal");return l(),i(a,null,[f(s,{active:t.isLoading},null,8,["active"]),e("div",Be,[Ge,e("div",Oe,[e("button",{type:"button",class:"btn btn-outline-primary d-flex align-items-center mb-3",onClick:o[0]||(o[0]=p=>d.openModal(null))},Je)]),e("table",Ke,[qe,e("tbody",null,[(l(!0),i(a,null,u(t.productList,p=>(l(),i("tr",{key:p.id},[e("td",Qe,[p.is_enabled==!0?(l(),i("p",Xe,"已開放")):(l(),i("p",Ye,"未開放"))]),e("td",Ze,r(p.title),1),e("td",$e,r(p.content),1),e("td",es,r(p.price),1),e("td",ss,[e("button",{title:"Alohomora ",class:"bg-transparent border-0",onClick:ns=>d.openModal(p)},ls,8,os)])]))),128))])]),e("div",is,[f(U,{pages:t.pages,getItem:d.getItem},null,8,["pages","getItem"])]),f(V,{ref:"courseModal",getItem:d.getItem},null,8,["getItem"])])],64)}const ms=k(je,[["render",ds]]);export{ms as default};
