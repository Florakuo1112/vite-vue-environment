import{_ as y,H as _,o as l,a as i,z as c,I as v,b as e,A as b,F as a,h as u,t as r,J as m,K as k,L as U,y as V,e as C,r as x}from"./index-BKKQqLik.js";import{c as T}from"./checkLogin-GQiCsjIL.js";import{b as D}from"./bootstrap.min-Dcp5m6Pb.js";const f="https://vue3-course-api.hexschool.io/v2",g="hogwarts",L={data(){return{professor:["Severus Snape","Filius Flitwick","Minerva McGonagall","Remus Lupin","Sybill Trelawney","Cuthbert Binns","Pomona Sprout","Rolanda Hooch","Rubeus Hagrid","Dolores Umbridge"],price:[5e3,1e4,15e3,2e4],courseModal:null,time:["Mon:0900~1200","Mon:0200~0500","Tues:0900~1200","Tues:0200~0500","Wed:0900~1200","Wed:0200~0500","Thur:0900~1200","Thur:0200~0500","Fri:0900~1200","Fri:0200~0500"],classRoom:["大禮堂","咒語學教室","變形術教室","魔法藥水學教室","防禦術教室","飛行課操場","魔法植物學溫室","預測學教室","Forbidden Forest"],edit:{category:"course",title:"",content:"",description:"",imageUrl:"",time:"",classroom:"",price:"",is_enabled:0},addCourse:{title:"",category:"course",unit:"門",origin_price:0,is_enabled:0}}},methods:{showModal(d){this.edit=d,this.courseModal.show(),console.log(this.edit)},close(){this.edit={},console.log(this.edit)},save(){console.log(this.edit);const d=this.edit;d.price=Number(d.price);const o=this.edit.id;console.log(o),_.put(`${f}/api/${g}/admin/product/${o}`,{data:d}).then(h=>{console.log(h),alert("Mischief managed"),this.courseModal.hide(),window.location.reload()}).catch(h=>{console.log(h)})},add(){console.log(this.addCourse);const d=this.addCourse;d.price=Number(d.price),_.post(`${f}/api/${g}/admin/product`,{data:d}).then(o=>{console.log(o),alert("Mischief managed"),this.courseModal.hide(),window.location.reload()}).catch(o=>{alert(o.response.data.message)})},deleteItem(){console.log(this.edit.id);const d=this.edit.id;_.delete(`${f}/api/${g}/admin/product/${d}`).then(o=>{console.log(o),alert("Mischief managed"),this.courseModal.hide(),window.location.reload()}).catch(o=>{alert(o.response.data.message)})}},mounted(){this.courseModal=new D.Modal(this.$refs.courseModal,{keyboard:!1,backdrop:"static"})}},P={class:"modal modal-lg",tabindex:"-1",ref:"courseModal"},I={class:"modal-dialog"},S={class:"modal-content"},A={class:"modal-header"},F=e("h5",{class:"modal-title"},"編輯課程",-1),R={class:"modal-body"},E={class:"mb-3"},H=e("label",{for:"courseTitle",class:"form-label"},"課程名稱",-1),N={class:"mb-3"},B=e("label",{for:"professor"},"教授",-1),j=e("option",{selected:"",disabled:""},"請選擇教授",-1),z={class:"mb-3"},G=e("label",{for:"courseDescription",class:"form-label"},"課程敘述",-1),O={class:"mb-3"},W=e("label",{for:"courseTime",class:"form-label"},"上課時段",-1),J=e("option",{selected:"",disabled:""},"請選擇上課時段",-1),K={class:"mb-3"},q=e("label",{for:"classroom",class:"form-label"},"教室",-1),Q=e("option",{selected:"",disabled:""},"請選擇上課教室",-1),X={class:"mb-3"},Y=e("label",{for:"coursePrice",class:"form-label"},"課程售價",-1),Z=e("option",{selected:"",disabled:""},"請選擇本課程售價",-1),$={class:"form-check"},ee=["checked"],se=e("label",{class:"form-check-label",for:"flexCheckChecked"}," Checked checkbox ",-1),oe={class:"mb-3"},te=e("label",{for:"photo",class:"form-label"},"照片",-1),le=["src"],ie={class:"modal-footer d-flex justify-content-between"},de={class:"modal-dialog"},ce={class:"modal-content"},ne={class:"modal-header"},re=e("h5",{class:"modal-title"},"新增課程",-1),ae={class:"modal-body"},ue={class:"mb-3"},me=e("label",{for:"courseTitle",class:"form-label"},"課程名稱",-1),pe={class:"mb-3"},be=e("label",{for:"professor"},"教授",-1),he=e("option",{selected:"",disabled:""},"請選擇教授",-1),_e={class:"mb-3"},fe=e("label",{for:"courseDescription",class:"form-label"},"課程敘述",-1),ge={class:"mb-3"},ve=e("label",{for:"courseTime",class:"form-label"},"上課時段",-1),ke=e("option",{selected:"",disabled:""},"請選擇上課時段",-1),Ce={class:"mb-3"},xe=e("label",{for:"classroom",class:"form-label"},"教室",-1),ye=e("option",{selected:"",disabled:""},"請選擇上課教室",-1),Me={class:"mb-3"},we=e("label",{for:"coursePrice",class:"form-label"},"課程售價",-1),Ue=e("option",{selected:"",disabled:""},"請選擇本課程售價",-1),Ve={class:"form-check"},Te=["checked"],De=e("label",{class:"form-check-label",for:"flexCheckChecked"}," Checked checkbox ",-1),Le={class:"mb-3"},Pe=e("label",{for:"photo",class:"form-label"},"照片",-1),Ie=["src"],Se={class:"modal-footer"};function Ae(d,o,h,M,t,n){return l(),i("div",P,[c(e("div",I,[e("div",S,[e("div",A,[F,e("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close",onClick:o[0]||(o[0]=(...s)=>n.close&&n.close(...s))})]),e("div",R,[e("div",E,[H,c(e("input",{type:"text",class:"form-control",id:"courseTitle",placeholder:"請輸入課程名稱","onUpdate:modelValue":o[1]||(o[1]=s=>t.edit.title=s)},null,512),[[b,t.edit.title]])]),e("div",N,[B,c(e("select",{class:"form-select","aria-label":"Default select example",id:"professor","onUpdate:modelValue":o[2]||(o[2]=s=>t.edit.content=s)},[j,(l(!0),i(a,null,u(t.professor,s=>(l(),i("option",{key:s},r(s),1))),128))],512),[[m,t.edit.content]])]),e("div",z,[G,c(e("textarea",{class:"form-control",id:"courseDescription",rows:"3","onUpdate:modelValue":o[3]||(o[3]=s=>t.edit.description=s)},null,512),[[b,t.edit.description]])]),e("div",O,[W,c(e("select",{class:"form-select","aria-label":"Default select example",id:"courseTime","onUpdate:modelValue":o[4]||(o[4]=s=>t.edit.time=s)},[J,(l(!0),i(a,null,u(t.time,s=>(l(),i("option",{key:s},r(s),1))),128))],512),[[m,t.edit.time]])]),e("div",K,[q,c(e("select",{class:"form-select","aria-label":"Default select example",id:"classroom","onUpdate:modelValue":o[5]||(o[5]=s=>t.edit.classroom=s)},[Q,(l(!0),i(a,null,u(t.classRoom,s=>(l(),i("option",{key:s},r(s),1))),128))],512),[[m,t.edit.classroom]])]),e("div",X,[Y,c(e("select",{class:"form-select","aria-label":"Default select example",id:"coursePrice","onUpdate:modelValue":o[6]||(o[6]=s=>t.edit.price=s)},[Z,(l(!0),i(a,null,u(t.price,s=>(l(),i("option",{key:s},r(s),1))),128))],512),[[m,t.edit.price]])]),e("div",$,[c(e("input",{class:"form-check-input",type:"checkbox",value:"",id:"flexCheckChecked",checked:t.edit.is_enabled,"onUpdate:modelValue":o[7]||(o[7]=s=>t.edit.is_enabled=s)},null,8,ee),[[k,t.edit.is_enabled]]),se]),e("div",oe,[te,c(e("input",{type:"text",class:"form-control",id:"photo",placeholder:"請提供相關照片","onUpdate:modelValue":o[8]||(o[8]=s=>t.edit.imageUrl=s)},null,512),[[b,t.edit.imageUrl]]),e("img",{src:t.edit.imageUrl,class:"mt-3",style:{height:"200px",weight:"200px"}},null,8,le)])]),e("div",ie,[e("button",{onClick:o[9]||(o[9]=(...s)=>n.deleteItem&&n.deleteItem(...s)),type:"button",class:"btn btn-danger"},"Delete"),e("div",null,[e("button",{type:"button",class:"btn btn-secondary me-2","data-bs-dismiss":"modal",onClick:o[10]||(o[10]=(...s)=>n.close&&n.close(...s))},"Close"),t.edit.id?(l(),i("button",{key:0,type:"button",class:"btn btn-primary",onClick:o[11]||(o[11]=(...s)=>n.save&&n.save(...s))},"Save Changes")):U("",!0)])])])],512),[[v,t.edit.id]]),c(e("div",de,[e("div",ce,[e("div",ne,[re,e("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close",onClick:o[12]||(o[12]=(...s)=>n.close&&n.close(...s))})]),e("div",ae,[e("div",ue,[me,c(e("input",{type:"text",class:"form-control",id:"courseTitle",placeholder:"請輸入課程名稱","onUpdate:modelValue":o[13]||(o[13]=s=>t.addCourse.title=s)},null,512),[[b,t.addCourse.title]])]),e("div",pe,[be,c(e("select",{class:"form-select","aria-label":"Default select example",id:"professor","onUpdate:modelValue":o[14]||(o[14]=s=>t.addCourse.content=s)},[he,(l(!0),i(a,null,u(t.professor,s=>(l(),i("option",{key:s},r(s),1))),128))],512),[[m,t.addCourse.content]])]),e("div",_e,[fe,c(e("textarea",{class:"form-control",id:"courseDescription",rows:"3","onUpdate:modelValue":o[15]||(o[15]=s=>t.addCourse.description=s)},null,512),[[b,t.addCourse.description]])]),e("div",ge,[ve,c(e("select",{class:"form-select","aria-label":"Default select example",id:"courseTime","onUpdate:modelValue":o[16]||(o[16]=s=>t.addCourse.time=s)},[ke,(l(!0),i(a,null,u(t.time,s=>(l(),i("option",{key:s},r(s),1))),128))],512),[[m,t.addCourse.time]])]),e("div",Ce,[xe,c(e("select",{class:"form-select","aria-label":"Default select example",id:"classroom","onUpdate:modelValue":o[17]||(o[17]=s=>t.addCourse.classroom=s)},[ye,(l(!0),i(a,null,u(t.classRoom,s=>(l(),i("option",{key:s},r(s),1))),128))],512),[[m,t.addCourse.classroom]])]),e("div",Me,[we,c(e("select",{class:"form-select","aria-label":"Default select example",id:"coursePrice","onUpdate:modelValue":o[18]||(o[18]=s=>t.addCourse.price=s)},[Ue,(l(!0),i(a,null,u(t.price,s=>(l(),i("option",{key:s},r(s),1))),128))],512),[[m,t.addCourse.price]])]),e("div",Ve,[c(e("input",{class:"form-check-input",type:"checkbox",value:"",id:"flexCheckChecked",checked:t.addCourse.is_enabled,"onUpdate:modelValue":o[19]||(o[19]=s=>t.addCourse.is_enabled=s)},null,8,Te),[[k,t.addCourse.is_enabled]]),De]),e("div",Le,[Pe,c(e("input",{type:"text",class:"form-control",id:"photo",placeholder:"請提供相關照片","onUpdate:modelValue":o[20]||(o[20]=s=>t.edit.imageUrl=s)},null,512),[[b,t.edit.imageUrl]]),e("img",{src:t.addCourse.imageUrl,class:"w-100 mt-3"},null,8,Ie)])]),e("div",Se,[e("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal",onClick:o[21]||(o[21]=(...s)=>n.close&&n.close(...s))},"Close"),e("button",{type:"button",class:"btn btn-primary",onClick:o[22]||(o[22]=(...s)=>n.add&&n.add(...s))},"Add Course")])])],512),[[v,t.edit.id==null]])],512)}const Fe=y(L,[["render",Ae]]),Re="https://vue3-course-api.hexschool.io/v2",Ee="hogwarts",He={components:{CourseModal:Fe},data(){return{productList:[],isLoading:!0}},methods:{...V(T,["checkLogin"]),getProduct(){_.get(`${Re}/api/${Ee}/admin/products/all`).then(d=>{console.log(d),this.productList=d.data.products,this.isLoading=!1})},openModal(d){let o={...d};this.$refs.courseModal.showModal(o)}},mounted(){this.checkLogin(),this.getProduct()}},Ne={class:"bg-warning pb-6"},Be={class:"container py-6"},je=e("h1",null,"本學期課程清單",-1),ze={class:"d-flex justify-content-end mb-2"},Ge=e("i",{class:"fa-solid fa-plus d-flex justify-content-end",style:{"font-size":"16px"}},null,-1),Oe=e("p",{class:"mb-0 ms-1"},"Add new course",-1),We=[Ge,Oe],Je={class:"table table-warning table-bordered border-primary table-hover"},Ke=e("thead",null,[e("tr",null,[e("th",{scope:"col",class:"text-center"},"Status"),e("th",{scope:"col",class:"text-center"},"Course"),e("th",{scope:"col",class:"text-center"},"Prof"),e("th",{scope:"col",class:"text-center"},"Galleon"),e("th",{scope:"col",class:"text-center"},"Edit")])],-1),qe={class:"text-center"},Qe={key:0},Xe={key:1},Ye={class:"text-center"},Ze={class:"text-center"},$e={class:"text-center"},es={class:"text-center"},ss=["onClick"],os=e("i",{class:"fa-solid fa-key text-warning"},null,-1),ts=[os];function ls(d,o,h,M,t,n){const s=x("LaodingOverlay"),w=x("CourseModal");return l(),i(a,null,[C(s,{active:t.isLoading},null,8,["active"]),e("div",Ne,[e("div",Be,[je,e("div",ze,[e("button",{type:"button",class:"btn btn-outline-primary d-flex align-items-center mb-3",onClick:o[0]||(o[0]=p=>n.openModal(null))},We)]),e("table",Je,[Ke,e("tbody",null,[(l(!0),i(a,null,u(t.productList,p=>(l(),i("tr",{key:p.id},[e("td",qe,[p.is_enabled==!0?(l(),i("p",Qe,"已開放")):(l(),i("p",Xe,"未開放"))]),e("td",Ye,r(p.title),1),e("td",Ze,r(p.content),1),e("td",$e,r(p.price),1),e("td",es,[e("button",{title:"Alohomora ",class:"bg-transparent border-0",onClick:is=>n.openModal(p)},ts,8,ss)])]))),128))])]),C(w,{ref:"courseModal"},null,512)])])],64)}const rs=y(He,[["render",ls]]);export{rs as default};
