import{_ as u,m as _,x as y,G as d,c as l,d as v,a as s,z as c,A as f,f as x,F as b,e as g,r as w,o as r}from"./index-Bavkz2tH.js";import{c as m}from"./checkLogin-zC808EN4.js";const p="https://vue3-course-api.hexschool.io/v2",L={data(){return{temp:{username:"",password:""},isLoading:!0}},computed:{..._(m,["isLogin"])},methods:{...y(m,["checkLogin"]),login(){this.isLoading=!0,d.post(`${p}/admin/signin`,this.temp).then(e=>{console.log(e);const{token:o,expired:a}=e.data;console.log(o,a),document.cookie=`floraFirstApiToken=${o}; expires=${new Date(a)}`,this.isLogin=!0,this.isLoading=!1,this.checkLogin()}).catch(e=>{window.alert(e.response.data.message),this.isLoading=!1})},logout(){console.log("logout"),this.isLoading=!0,d.post(`${p}/logout`).then(e=>{console.log(e.data.message),e.data.message=="已登出"&&(this.isLoading=!1,window.alert("Mischief Managed"),document.cookie=`floraFirstApiToken=; expires=${new Date}`,this.checkLogin())}).catch(e=>{console.log(e),this.isLoading=!1})}},mounted(){this.isLoading=!1,console.log(this.$route)}},z={class:"bg-warning vh-100"},k={class:"container pt-6"},A={key:0,class:"row d-flex flex-column align-items-center"},C={class:"col-lg-5"},M=g('<h1 style="font-family:Amatic SC;"> I solemnly swear that ... <br> I am up to no good <i class="fa-solid fa-shoe-prints" style="font-size:32px;"></i><i class="fa-solid fa-shoe-prints" style="font-size:32px;"></i><i class="fa-solid fa-shoe-prints" style="font-size:32px;"></i><i class="fa-solid fa-shoe-prints" style="font-size:32px;"></i></h1>',1),V={id:"form",class:"form-signin"},S={class:"form-floating mb-3"},I=s("label",{for:"username"},"Email address",-1),O={class:"form-floating"},T=s("label",{for:"password"},"Password",-1),F=s("i",{class:"fa-solid fa-hat-wizard mb-0",style:{"font-size":"20px"}},null,-1),N=s("p",{style:{"font-family":"Amatic SC","font-size":"32px"},class:"mb-0"}," LOGIN ",-1),P=[F,N],U={key:1,class:"row d-flex flex-column align-items-center"},B={style:{"font-family":"Amatic SC"},class:"d-flex flex-column align-items-center col-lg-5"},D=g('<div>Messrs</div><div style="font-size:48px;">Moony, Wormtail</div><div style="font-size:48px;">Padfoot &amp; Prongs</div><div style="font-size:24px;">are proud to present </div><div style="font-weight:bold;font-size:48px;">the</div><div style="font-weight:bold;font-size:48px;">Marauder&#39;s</div><div style="font-weight:bold;font-size:48px;">map</div>',7),E=s("i",{class:"fa-solid fa-hat-wizard mb-0",style:{"font-size":"20px"}},null,-1),G=s("p",{style:{"font-family":"Amatic SC","font-size":"32px"},class:"mb-0"}," LOGOUT ",-1),j=[E,G];function q(e,o,a,R,i,n){const h=w("LaodingOverlay");return r(),l(b,null,[v(h,{active:i.isLoading},null,8,["active"]),s("div",z,[s("div",k,[e.isLogin?(r(),l("div",U,[s("h1",B,[D,s("button",{class:"btn btn-lg btn btn-outline-primary w-100 mt-3 d-flex align-items-center justify-content-center",type:"button",onClick:o[3]||(o[3]=(...t)=>n.logout&&n.logout(...t))},j)])])):(r(),l("div",A,[s("div",C,[M,s("form",V,[s("div",S,[c(s("input",{type:"email",class:"form-control bg-transparent border-primary",id:"username",placeholder:"name@example.com",required:"",autofocus:"","onUpdate:modelValue":o[0]||(o[0]=t=>i.temp.username=t)},null,512),[[f,i.temp.username]]),I]),s("div",O,[c(s("input",{type:"password",class:"form-control bg-transparent border-primary",id:"password",placeholder:"Password",required:"","onUpdate:modelValue":o[1]||(o[1]=t=>i.temp.password=t)},null,512),[[f,i.temp.password]]),T]),s("button",{class:"btn btn-lg btn btn-outline-primary w-100 mt-3 d-flex align-items-center justify-content-center",type:"button",onClick:o[2]||(o[2]=x((...t)=>n.login&&n.login(...t),["prevent"]))},P)])])]))])])],64)}const H=u(L,[["render",q]]);export{H as default};
